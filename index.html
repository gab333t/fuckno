<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUCK NO</title>
    <link rel="stylesheet" href="index.css">
    <link rel="icon" type="image/x-icon" href="img/favicon_light.svg">
</head>
<body>
    <div class="marquee-container">
        <a class="marquee-header" href="https://gab333t.github.io/fuckno/">FUCK NO</a>
        <nav class="marquee-nav">
            <a class="marquee-text" href="https://gab333t.github.io/fuckno/about.html">ABOUT</a>
        </nav>
    </div>

    <div class="inventory-grid"></div>

    <div class="confirmation-screen">
        <div class="confirmation-text">
            <span id="selection-count">0</span> of 76 NO's Selected<br>
            Proceed to RAGE ROOM<em>?</em>
        </div>
        <div class="confirmation-buttons">
            <button class="confirmation-button" id="fuck-yes-button">FUCK YES</button>
            <button class="confirmation-button" id="fuck-no-button">FUCK NO</button>
        </div>
    </div>

    <div class="button-container">
        <h2 class="button-text disabled" id="pick-button">PICK BEFORE YOU RAGE</h2>
        <h2 class="button-text" id="select-all-button">SELECT ALL</h2>
    </div>
    
<script>
const labels = [
    '1. PARKING24HR',
    '2. STANDINGFORCONSTRUCTION',
    '3. BLOCKDRIVEWAY',
    '4. SMOKING',
    '5. ELEVATOR_ICOFIRE',
    '6. DANGERSMOKING',
    '7. DANGERENTER',
    '8. STANDING+PARKING',
    '9. ENTER',
    '10. EATDRINKSMOKE',
    '11. ENTERCROSSTRACK',
    '12. DUMPING',
    '13. FLYERSMENUSADVERTISEMENTS',
    '14. UNSOLICITEDADVERTISEMENTS',
    '15. DUMPINGFINE500',
    '16. SOLICITINGOREXCEPTIONS',
    '17. TRESPASSORPROSECUTE',
    '18. PARKORTOWED',
    '19. STEALMYRECYCLING',
    '20. BLOCKDRIVEWAY',
    '21. TRESPASS',
    '22. TRESPASSONPROPERTY',
    '23. THRUTRAFFIC4HOSPITAL',
    '24. SMOKE25FT',
    '25. BLOCKSTAIRB',
    '26. BLOCKFIREEXIT',
    '27. SMOKING',
    '28. DUMPANDGETPROSECUTED',
    '29. SMOKEVAPEECIG',
    '30. STANDUNDERLIFTS',
    '31. TRESPASS',
    '32. PARKINGFORCONSTRUCTION',
    '33. SOLICITLOITERTRESPASS',
    '34. BLOCKLOADINGDOCK',
    '35. PARKSTANDONPRIVATEST',
    '36. PARKACTIVECROSSING',
    '37. OUTSIDEFOODBEV',
    '38. OVERFIIIIILL',
    '39. PPLONLYOPERATOR',
    '40. EXITXXXXXX',
    '41. CHILDRENONCART',
    '42. TOUCHTHANKS',
    '43. ENTERROOMRUN',
    '44. ENTER',
    '45. COMMERCIALTRAFFIC',
    '46. RESTROOMS4CUSTOMERSONLY',
    '47. LOCKBIKESORGETCUT',
    '48. CHAINBIKE2FENCE',
    '49. TOBACCOVAPE4UNDER21',
    '50. FLYERSADSMENUSPLS',
    '51. SMOKINGDURINGFUELING',
    '52. DUMPINGBYMTA',
    '53. HOUSEHOLDORBUSINESSTRASH',
    '54. IDLINGENGINE',
    '55. PARKINGBYFDNY',
    '56. ENTRYORMAYBEYES',
    '57. HOODIESSKIMASKSBANDANAS',
    '58. DOGORBIKEINSTORE',
    '59. TRESPASSING',
    '60. BLOCKINGPLSANDTHANKS',
    '61. LITTER4CHURCH',
    '62. BALLPLAYING',
    '63. OURLAUNDRYINOURMACHINES',
    '64. TRESPASSINGORPROSECUTED',
    '65. TRESPASSINGONOURPROPERTY',
    '66. STUPIDPPL',
    '67. MOPEDSANDATVS',
    '68. POSTINGBILLS',
    '69. CLIMBING',
    '70. RIDINGINPORTAUTHORITY',
    '71. ENTERBUTDELIVERIESROK',
    '72. SOLICITLOITERORTRESPASS',
    '73. BIKINGINFLATIRON',
    '74. SHOESINDRYERS',
    '75. BUYORSELLEBT',
    '76. SMOKINGBYPUFFIN',
];

let buttonTimeout = null;

function setFavicon() {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const faviconPath = isDarkMode ? 'img/favicon_dark.svg' : 'img/favicon_light.svg';

    let favicon = document.querySelector("link[rel='icon']");
    if (!favicon) {
        favicon = document.createElement('link');
        favicon.rel = 'icon';
        document.head.appendChild(favicon);
    }
    favicon.href = faviconPath;
}

function updateAboutText() {
    const aboutLink = document.querySelector('.marquee-text');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (window.innerWidth <= 550) {
        const imagePath = isDarkMode ? 'img/about_dark.svg' : 'img/about_light.svg';
        aboutLink.innerHTML = `<img src="${imagePath}" alt="About" class="about-icon" draggable="false">`;
    } else {
        aboutLink.textContent = 'ABOUT';
    }
}

setFavicon();
updateAboutText();

window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    setFavicon();
    updateAboutText();
});

window.addEventListener('resize', updateAboutText);

let titleIndex = 0;
const titles = ['FUCK NO', 'INVENTORY'];
setInterval(() => {
    titleIndex = (titleIndex + 1) % titles.length;
    document.title = titles[titleIndex];
}, 3000);

function createInventoryGrid() {
    const grid = document.querySelector('.inventory-grid');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = isDarkMode ? 'dark' : 'light';
    
    for (let i = 1; i <= 76; i++) {
        const containerElement = document.createElement('div');
        containerElement.className = 'inventory-item-container';
        
        const imgElement = document.createElement('img');
        imgElement.src = `img/no${i}_${theme}.webp`;
        imgElement.alt = `Inventory item ${i}`;
        imgElement.className = 'inventory-item';
        imgElement.draggable = false;
        imgElement.loading = 'lazy';
        imgElement.dataset.number = i;
        imgElement.addEventListener('click', (e) => {
            const checkbox = containerElement.querySelector('.checkbox-icon');
            toggleCheckbox(checkbox);
        });
        
        const checkboxElement = document.createElement('img');
        checkboxElement.src = `img/checkbox_${theme}.svg`;
        checkboxElement.alt = 'Checkbox';
        checkboxElement.className = 'checkbox-icon';
        checkboxElement.draggable = false;
        checkboxElement.dataset.number = i;
        checkboxElement.dataset.checked = 'false';
        checkboxElement.addEventListener('click', (e) => {
            e.stopPropagation();
            toggleCheckbox(checkboxElement);
        });
        
        const labelElement = document.createElement('h3');
        labelElement.className = 'small-text';
        labelElement.textContent = labels[i - 1];
        labelElement.dataset.number = i;
        
        containerElement.appendChild(imgElement);
        containerElement.appendChild(checkboxElement);
        containerElement.appendChild(labelElement);
        grid.appendChild(containerElement);
    }
}

function getSelectedCount() {
    return document.querySelectorAll('.checkbox-icon[data-checked="true"]').length;
}

function updatePickButton() {
    const pickButton = document.getElementById('pick-button');
    const anyChecked = document.querySelector('.checkbox-icon[data-checked="true"]');
    
    if (anyChecked) {
        pickButton.textContent = 'PROCEED TO RAGE ROOM';
        pickButton.classList.remove('disabled');
    } else {
        pickButton.textContent = 'PICK BEFORE YOU RAGE';
        pickButton.classList.add('disabled');
    }
}

function showTargetFeedback(number) {
    const pickButton = document.getElementById('pick-button');
    const formattedNumber = String(number).padStart(2, '0');
    
    if (buttonTimeout) {
        clearTimeout(buttonTimeout);
    }
    
    pickButton.textContent = `.${formattedNumber} ADDED TO TARGET`;
    pickButton.classList.remove('disabled');
    
    buttonTimeout = setTimeout(() => {
        updatePickButton();
    }, 1000);
}

function toggleCheckbox(checkboxElement) {
    const number = checkboxElement.dataset.number;
    const isChecked = checkboxElement.dataset.checked === 'true';
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = isDarkMode ? 'dark' : 'light';
    
    const labelElement = document.querySelector(`.small-text[data-number="${number}"]`);
    const containerElement = checkboxElement.closest('.inventory-item-container');
    const imgElement = containerElement.querySelector('.inventory-item');
    
    if (isChecked) {
        checkboxElement.src = `img/checkbox_${theme}.svg`;
        checkboxElement.dataset.checked = 'false';
        if (labelElement) {
            labelElement.classList.remove('checked');
        }
        if (containerElement) {
            containerElement.classList.remove('checked');
        }
        if (imgElement) {
            imgElement.src = `img/no${number}_${theme}.webp`;
        }
        updatePickButton();
    } else {
        checkboxElement.src = `img/checkbox_check_${theme}.svg`;
        checkboxElement.dataset.checked = 'true';
        if (labelElement) {
            labelElement.classList.add('checked');
        }
        if (containerElement) {
            containerElement.classList.add('checked');
        }
        const invertedTheme = isDarkMode ? 'light' : 'dark';
        if (imgElement) {
            imgElement.src = `img/no${number}_${invertedTheme}.webp`;
        }
        showTargetFeedback(number);
    }
}

function updateInventoryImages() {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = isDarkMode ? 'dark' : 'light';
    const invertedTheme = isDarkMode ? 'light' : 'dark';
    const images = document.querySelectorAll('.inventory-item');
    const checkboxes = document.querySelectorAll('.checkbox-icon');
    
    images.forEach(img => {
        const number = img.dataset.number;
        const checkbox = document.querySelector(`.checkbox-icon[data-number="${number}"]`);
        const isChecked = checkbox && checkbox.dataset.checked === 'true';
        
        img.src = `img/no${number}_${isChecked ? invertedTheme : theme}.webp`;
    });
    
    checkboxes.forEach(checkbox => {
        const isChecked = checkbox.dataset.checked === 'true';
        if (isChecked) {
            checkbox.src = `img/checkbox_check_${theme}.svg`;
        } else {
            checkbox.src = `img/checkbox_${theme}.svg`;
        }
    });
}

function selectAllItems() {
    const checkboxes = document.querySelectorAll('.checkbox-icon');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = isDarkMode ? 'dark' : 'light';
    const invertedTheme = isDarkMode ? 'light' : 'dark';
    const pickButton = document.getElementById('pick-button');
    let anyNewlyChecked = false;
    
    checkboxes.forEach(checkbox => {
        const number = checkbox.dataset.number;
        const isChecked = checkbox.dataset.checked === 'true';
        
        if (!isChecked) {
            anyNewlyChecked = true;
            const labelElement = document.querySelector(`.small-text[data-number="${number}"]`);
            const containerElement = checkbox.closest('.inventory-item-container');
            const imgElement = containerElement.querySelector('.inventory-item');
            
            checkbox.src = `img/checkbox_check_${theme}.svg`;
            checkbox.dataset.checked = 'true';
            
            if (labelElement) {
                labelElement.classList.add('checked');
            }
            if (containerElement) {
                containerElement.classList.add('checked');
            }
            if (imgElement) {
                imgElement.src = `img/no${number}_${invertedTheme}.webp`;
            }
        }
    });
    
    if (anyNewlyChecked) {
        if (buttonTimeout) {
            clearTimeout(buttonTimeout);
        }
        
        pickButton.textContent = 'ALL ADDED TO TARGET';
        pickButton.classList.remove('disabled');
        
        buttonTimeout = setTimeout(() => {
            updatePickButton();
        }, 1500);
    }
}

function showConfirmationScreen() {
    const selectedCount = getSelectedCount();
    if (selectedCount === 0) return;
    
    document.querySelector('.inventory-grid').classList.add('hidden');
    document.querySelector('.button-container').classList.add('hidden');
    document.querySelector('.confirmation-screen').classList.add('active');
    document.getElementById('selection-count').textContent = selectedCount;
}

function hideConfirmationScreen() {
    document.querySelector('.inventory-grid').classList.remove('hidden');
    document.querySelector('.button-container').classList.remove('hidden');
    document.querySelector('.confirmation-screen').classList.remove('active');
}

createInventoryGrid();
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateInventoryImages);

document.getElementById('select-all-button').addEventListener('click', selectAllItems);

document.getElementById('pick-button').addEventListener('click', () => {
    const pickButton = document.getElementById('pick-button');
    if (!pickButton.classList.contains('disabled')) {
        showConfirmationScreen();
    }
});

document.getElementById('fuck-yes-button').addEventListener('click', () => {
    console.log('Proceeding to rage room!');
});

document.getElementById('fuck-no-button').addEventListener('click', () => {
    hideConfirmationScreen();
});

function openImageModal(number, theme) {
    const modal = document.querySelector('.image-modal');
    const overlay = document.querySelector('.image-modal-overlay');
    const modalImg = document.querySelector('.image-modal-img');
    const closeIcon = document.querySelector('.image-modal-close');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    modalImg.src = `img/no${number}_${theme}.webp`;
    modalImg.alt = `Inventory item ${number}`;
    closeIcon.src = isDarkMode ? 'img/menu_close_dark.svg' : 'img/menu_close_light.svg';
    
    modal.classList.add('active');
    overlay.classList.add('active');
    closeIcon.classList.add('active');
    document.body.classList.add('no-scroll');
}

function closeImageModal() {
    const modal = document.querySelector('.image-modal');
    const overlay = document.querySelector('.image-modal-overlay');
    const closeIcon = document.querySelector('.image-modal-close');
    
    modal.classList.remove('active');
    overlay.classList.remove('active');
    closeIcon.classList.remove('active');
    document.body.classList.remove('no-scroll');
}

document.getElementById('fuck-yes-button').addEventListener('click', () => {
    const selected = Array.from(document.querySelectorAll('.checkbox-icon[data-checked="true"]'))
        .map(cb => cb.dataset.number)
        .join(',');
    window.location.href = `rageroom.html?selected=${selected}`;
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUCK NO</title>
    <link rel="stylesheet" href="inventory.css">
    <link rel="icon" type="image/x-icon" href="img/favicon_light.svg">
</head>
<body>
    <div class="marquee-container">
        <a class="marquee-header" href="https://gab333t.github.io/fuckno/">FUCK NO</a>
        <nav class="marquee-nav">
            <a class="marquee-text" href="https://gab333t.github.io/fuckno/about.html"></a>
        </nav>
    </div>

    <div class="inventory-grid"></div>
    
<script>
function setFavicon() {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const faviconPath = isDarkMode ? 'img/favicon_dark.svg' : 'img/favicon_light.svg';

    let favicon = document.querySelector("link[rel='icon']");
    if (!favicon) {
        favicon = document.createElement('link');
        favicon.rel = 'icon';
        document.head.appendChild(favicon);
    }
    favicon.href = faviconPath;
}

function updateAboutText() {
    const aboutLink = document.querySelector('.marquee-text');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (window.innerWidth <= 550) {
        const imagePath = isDarkMode ? 'img/about_dark.svg' : 'img/about_light.svg';
        aboutLink.innerHTML = `<img src="${imagePath}" alt="About" class="about-icon" draggable="false">`;
    } else {
        aboutLink.textContent = 'About';
    }
}

setFavicon();
updateAboutText();

window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
    setFavicon();
    updateAboutText();
});

window.addEventListener('resize', updateAboutText);

let titleIndex = 0;
const titles = ['FUCK NO', 'INVENTORY'];
setInterval(() => {
    titleIndex = (titleIndex + 1) % titles.length;
    document.title = titles[titleIndex];
}, 3000);

function createInventoryGrid() {
    const grid = document.querySelector('.inventory-grid');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = isDarkMode ? 'dark' : 'light';
    
    for (let i = 1; i <= 76; i++) {
        const containerElement = document.createElement('div');
        containerElement.className = 'inventory-item-container';
        
        const imgElement = document.createElement('img');
        imgElement.src = `img/no${i}_${theme}.webp`;
        imgElement.alt = `Inventory item ${i}`;
        imgElement.className = 'inventory-item';
        imgElement.draggable = false;
        imgElement.loading = 'lazy';
        imgElement.dataset.number = i;
        imgElement.addEventListener('click', () => openImageModal(i, theme));
        
        containerElement.appendChild(imgElement);
        grid.appendChild(containerElement);
    }
}

function updateInventoryImages() {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const theme = isDarkMode ? 'dark' : 'light';
    const images = document.querySelectorAll('.inventory-item');
    
    images.forEach(img => {
        const number = img.dataset.number;
        img.src = `img/no${number}_${theme}.webp`;
    });
}

createInventoryGrid();
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateInventoryImages);

function openImageModal(number, theme) {
    const modal = document.querySelector('.image-modal');
    const overlay = document.querySelector('.image-modal-overlay');
    const modalImg = document.querySelector('.image-modal-img');
    const closeIcon = document.querySelector('.image-modal-close');
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    modalImg.src = `img/no${number}_${theme}.webp`;
    modalImg.alt = `Inventory item ${number}`;
    closeIcon.src = isDarkMode ? 'img/menu_close_dark.svg' : 'img/menu_close_light.svg';
    
    modal.classList.add('active');
    overlay.classList.add('active');
    closeIcon.classList.add('active');
    document.body.classList.add('no-scroll');
}

function closeImageModal() {
    const modal = document.querySelector('.image-modal');
    const overlay = document.querySelector('.image-modal-overlay');
    const closeIcon = document.querySelector('.image-modal-close');
    
    modal.classList.remove('active');
    overlay.classList.remove('active');
    closeIcon.classList.remove('active');
    document.body.classList.remove('no-scroll');
}

document.querySelector('.image-modal-overlay').addEventListener('click', closeImageModal);
document.querySelector('.image-modal-close').addEventListener('click', closeImageModal);
</script>
</body>
</html>